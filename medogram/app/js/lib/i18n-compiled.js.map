{"version":3,"sources":["i18n.js"],"names":[],"mappings":"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","file":"i18n-compiled.js","sourcesContent":["'use strict'\n\nangular.module('myApp.i18n', ['izhukov.utils'])\n  .factory('_', ['$rootScope', '$locale', function ($rootScope, $locale) {\n    var locale = Config.I18n.locale\n    var messages = Config.I18n.messages\n    var fallbackMessages = Config.I18n.fallback_messages\n    var paramRegEx = /\\{\\s*([a-zA-Z\\d\\-_]+)(?:\\s*:\\s*(.*?))?\\s*\\}/g\n\n    function insertParams (msgstr, params) {\n      return msgstr.replace(paramRegEx, function ($0, paramKey, nestedMsgStr) {\n        var param = params[paramKey]\n        if (param === undefined) {\n          console.warn('[i18n] missing param ' + paramKey + ' for message \"' + msgstr + '\"')\n          return ''\n        }\n        if (nestedMsgStr !== undefined) {\n          param = insertParams(param, nestedMsgStr.split('|'))\n        }\n        return param.toString().trim()\n      })\n    }\n\n    function parseMarkdownString (msgstr, msgid) {\n      msgstr = msgstr\n        .replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>')\n        .replace(/\\n|&#10;/g, '<br/>')\n\n      return msgstr\n    }\n\n    function _ (msgid, params) {\n      var raw = false\n      var msgstr = msgid\n\n      if (msgid.substr(-4) === '_raw') {\n        raw = true\n        msgid = msgid.substr(0, msgid.length - 4)\n      }\n\n      if (messages.hasOwnProperty(msgid)) {\n        msgstr = messages[msgid]\n      } else if (fallbackMessages.hasOwnProperty(msgid)) {\n        msgstr = fallbackMessages[msgid]\n        console.warn('[i18n] missing locale key ' + locale + ' / ' + msgid)\n      } else {\n        console.warn('[i18n] missing key ' + msgid)\n        return msgid\n      }\n\n      if (!raw) {\n        msgstr = encodeEntities(msgstr)\n      }\n      if (msgid.substr(-3) == '_md') {\n        msgstr = parseMarkdownString(msgstr)\n      }\n\n      if (arguments.length > 1) {\n        if (typeof params == 'string') {\n          Array.prototype.shift.apply(arguments)\n          msgstr = insertParams(msgstr, arguments)\n        } else {\n          msgstr = insertParams(msgstr, params)\n        }\n      }\n\n      return msgstr\n    }\n\n    _.locale = function () {\n      return locale\n    }\n\n    _.pluralize = function (msgid) {\n      var categories = $rootScope.$eval(_(msgid + '_raw'))\n      return function (count) {\n        return (categories[$locale.pluralCat(count)] || '').replace('{}', count)\n      }\n    }\n\n    return _\n  }])\n\n  .filter('i18n', ['_', function (_) {\n    return function (msgid, params) {\n      return _(msgid + '_raw', params)\n    }\n  }])\n\n  .directive('ngPluralize', ['_', function (_) {\n    return {\n      restrict: 'EA',\n      priority: 1, // execute before built-in ngPluralize\n      compile: function (element) {\n        var msgid = element.attr('when')\n        var msgstr = _(msgid + '_raw')\n        element.attr('when', msgstr)\n      }\n    }\n  }])\n\n  .directive('myI18n', ['_', function (_) {\n    return {\n      restrict: 'EA',\n      compile: function (element) {\n        var params = element.children('my-i18n-param:not([name]), [my-i18n-param=\"\"]:not([name])').map(function (index, param) {\n          return param.outerHTML\n        }).toArray()\n        element.children('my-i18n-param[name], [my-i18n-param]:not([my-i18n-param=\"\"]), [my-i18n-param][name]').each(function (i, param) {\n          params[angular.element(param).attr('my-i18n-param') || angular.element(param).attr('name')] = param.outerHTML\n        })\n        element.children('my-i18n-param').remove()\n        var formats = element.attr('my-i18n') || element.attr('msgid') ? element : element.children('my-i18n-format, [my-i18n-format]')\n        formats.each(function (index, element) {\n          var format = angular.element(element)\n          var msgid = format.attr('my-i18n') || format.attr('msgid') || format.attr('my-i18n-format') || format.html().replace(/\\s+/g, ' ').trim()\n          if (format.hasClass('nocopy')) {\n            var msgstr = _(msgid + '_raw', params)\n            format.attr('data-content', msgstr)\n          } else {\n            var msgstr = _(msgid, params)\n            format.html(msgstr)\n          }\n        })\n      }\n    }\n  }])\n"]}