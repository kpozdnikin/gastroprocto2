{"version":3,"sources":["tl_utils.js"],"names":[],"mappings":"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","file":"tl_utils-compiled.js","sourcesContent":["/*!\n * Webogram v0.5.5 - messaging web application for MTProto\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nfunction TLSerialization (options) {\n  options = options || {}\n  this.maxLength = options.startMaxLength || 2048 // 2Kb\n  this.offset = 0 // in bytes\n\n  this.createBuffer()\n\n  // this.debug = options.debug !== undefined ? options.debug : Config.Modes.debug\n  this.mtproto = options.mtproto || false\n  return this\n}\n\nTLSerialization.prototype.createBuffer = function () {\n  this.buffer = new ArrayBuffer(this.maxLength)\n  this.intView = new Int32Array(this.buffer)\n  this.byteView = new Uint8Array(this.buffer)\n}\n\nTLSerialization.prototype.getArray = function () {\n  var resultBuffer = new ArrayBuffer(this.offset)\n  var resultArray = new Int32Array(resultBuffer)\n\n  resultArray.set(this.intView.subarray(0, this.offset / 4))\n\n  return resultArray\n}\n\nTLSerialization.prototype.getBuffer = function () {\n  return this.getArray().buffer\n}\n\nTLSerialization.prototype.getBytes = function (typed) {\n  if (typed) {\n    var resultBuffer = new ArrayBuffer(this.offset)\n    var resultArray = new Uint8Array(resultBuffer)\n\n    resultArray.set(this.byteView.subarray(0, this.offset))\n\n    return resultArray\n  }\n\n  var bytes = []\n  for (var i = 0; i < this.offset; i++) {\n    bytes.push(this.byteView[i])\n  }\n  return bytes\n}\n\nTLSerialization.prototype.checkLength = function (needBytes) {\n  if (this.offset + needBytes < this.maxLength) {\n    return\n  }\n\n  console.trace('Increase buffer', this.offset, needBytes, this.maxLength)\n  this.maxLength = Math.ceil(Math.max(this.maxLength * 2, this.offset + needBytes + 16) / 4) * 4\n  var previousBuffer = this.buffer\n  var previousArray = new Int32Array(previousBuffer)\n\n  this.createBuffer()\n\n  new Int32Array(this.buffer).set(previousArray)\n}\n\nTLSerialization.prototype.writeInt = function (i, field) {\n  this.debug && console.log('>>>', i.toString(16), i, field)\n\n  this.checkLength(4)\n  this.intView[this.offset / 4] = i\n  this.offset += 4\n}\n\nTLSerialization.prototype.storeInt = function (i, field) {\n  this.writeInt(i, (field || '') + ':int')\n}\n\nTLSerialization.prototype.storeBool = function (i, field) {\n  if (i) {\n    this.writeInt(0x997275b5, (field || '') + ':bool')\n  } else {\n    this.writeInt(0xbc799737, (field || '') + ':bool')\n  }\n}\n\nTLSerialization.prototype.storeLongP = function (iHigh, iLow, field) {\n  this.writeInt(iLow, (field || '') + ':long[low]')\n  this.writeInt(iHigh, (field || '') + ':long[high]')\n}\n\nTLSerialization.prototype.storeLong = function (sLong, field) {\n  if (angular.isArray(sLong)) {\n    if (sLong.length == 2) {\n      return this.storeLongP(sLong[0], sLong[1], field)\n    } else {\n      return this.storeIntBytes(sLong, 64, field)\n    }\n  }\n\n  if (typeof sLong != 'string') {\n    sLong = sLong ? sLong.toString() : '0'\n  }\n  var divRem = bigStringInt(sLong).divideAndRemainder(bigint(0x100000000))\n\n  this.writeInt(intToUint(divRem[1].intValue()), (field || '') + ':long[low]')\n  this.writeInt(intToUint(divRem[0].intValue()), (field || '') + ':long[high]')\n}\n\nTLSerialization.prototype.storeDouble = function (f, field) {\n  var buffer = new ArrayBuffer(8)\n  var intView = new Int32Array(buffer)\n  var doubleView = new Float64Array(buffer)\n\n  doubleView[0] = f\n\n  this.writeInt(intView[0], (field || '') + ':double[low]')\n  this.writeInt(intView[1], (field || '') + ':double[high]')\n}\n\nTLSerialization.prototype.storeString = function (s, field) {\n  this.debug && console.log('>>>', s, (field || '') + ':string')\n\n  if (s === undefined) {\n    s = ''\n  }\n  var sUTF8 = unescape(encodeURIComponent(s))\n\n  this.checkLength(sUTF8.length + 8)\n\n  var len = sUTF8.length\n  if (len <= 253) {\n    this.byteView[this.offset++] = len\n  } else {\n    this.byteView[this.offset++] = 254\n    this.byteView[this.offset++] = len & 0xFF\n    this.byteView[this.offset++] = (len & 0xFF00) >> 8\n    this.byteView[this.offset++] = (len & 0xFF0000) >> 16\n  }\n  for (var i = 0; i < len; i++) {\n    this.byteView[this.offset++] = sUTF8.charCodeAt(i)\n  }\n\n  // Padding\n  while (this.offset % 4) {\n    this.byteView[this.offset++] = 0\n  }\n}\n\nTLSerialization.prototype.storeBytes = function (bytes, field) {\n  if (bytes instanceof ArrayBuffer) {\n    bytes = new Uint8Array(bytes)\n  }\n  else if (bytes === undefined) {\n    bytes = []\n  }\n  this.debug && console.log('>>>', bytesToHex(bytes), (field || '') + ':bytes')\n\n  var len = bytes.byteLength || bytes.length\n  this.checkLength(len + 8)\n  if (len <= 253) {\n    this.byteView[this.offset++] = len\n  } else {\n    this.byteView[this.offset++] = 254\n    this.byteView[this.offset++] = len & 0xFF\n    this.byteView[this.offset++] = (len & 0xFF00) >> 8\n    this.byteView[this.offset++] = (len & 0xFF0000) >> 16\n  }\n\n  this.byteView.set(bytes, this.offset)\n  this.offset += len\n\n  // Padding\n  while (this.offset % 4) {\n    this.byteView[this.offset++] = 0\n  }\n}\n\nTLSerialization.prototype.storeIntBytes = function (bytes, bits, field) {\n  if (bytes instanceof ArrayBuffer) {\n    bytes = new Uint8Array(bytes)\n  }\n  var len = bytes.length\n  if ((bits % 32) || (len * 8) != bits) {\n    throw new Error('Invalid bits: ' + bits + ', ' + bytes.length)\n  }\n\n  this.debug && console.log('>>>', bytesToHex(bytes), (field || '') + ':int' + bits)\n  this.checkLength(len)\n\n  this.byteView.set(bytes, this.offset)\n  this.offset += len\n}\n\nTLSerialization.prototype.storeRawBytes = function (bytes, field) {\n  if (bytes instanceof ArrayBuffer) {\n    bytes = new Uint8Array(bytes)\n  }\n  var len = bytes.length\n\n  this.debug && console.log('>>>', bytesToHex(bytes), (field || ''))\n  this.checkLength(len)\n\n  this.byteView.set(bytes, this.offset)\n  this.offset += len\n}\n\nTLSerialization.prototype.storeMethod = function (methodName, params) {\n  var schema = this.mtproto ? Config.Schema.MTProto : Config.Schema.API\n  var methodData = false,\n    i\n\n  for (i = 0; i < schema.methods.length; i++) {\n    if (schema.methods[i].method == methodName) {\n      methodData = schema.methods[i]\n      break\n    }\n  }\n  if (!methodData) {\n    throw new Error('No method ' + methodName + ' found')\n  }\n\n  this.storeInt(intToUint(methodData.id), methodName + '[id]')\n\n  var param, type\n  var i, condType\n  var fieldBit\n  var len = methodData.params.length\n  for (i = 0; i < len; i++) {\n    param = methodData.params[i]\n    type = param.type\n    if (type.indexOf('?') !== -1) {\n      condType = type.split('?')\n      fieldBit = condType[0].split('.')\n      if (!(params[fieldBit[0]] & (1 << fieldBit[1]))) {\n        continue\n      }\n      type = condType[1]\n    }\n\n    this.storeObject(params[param.name], type, methodName + '[' + param.name + ']')\n  }\n\n  return methodData.type\n}\n\nTLSerialization.prototype.storeObject = function (obj, type, field) {\n  switch (type) {\n    case '#':\n    case 'int':\n      return this.storeInt(obj, field)\n    case 'long':\n      return this.storeLong(obj, field)\n    case 'int128':\n      return this.storeIntBytes(obj, 128, field)\n    case 'int256':\n      return this.storeIntBytes(obj, 256, field)\n    case 'int512':\n      return this.storeIntBytes(obj, 512, field)\n    case 'string':\n      return this.storeString(obj, field)\n    case 'bytes':\n      return this.storeBytes(obj, field)\n    case 'double':\n      return this.storeDouble(obj, field)\n    case 'Bool':\n      return this.storeBool(obj, field)\n    case 'true':\n      return\n  }\n\n  if (angular.isArray(obj)) {\n    if (type.substr(0, 6) == 'Vector') {\n      this.writeInt(0x1cb5c415, field + '[id]')\n    }\n    else if (type.substr(0, 6) != 'vector') {\n      throw new Error('Invalid vector type ' + type)\n    }\n    var itemType = type.substr(7, type.length - 8); // for \"Vector<itemType>\"\n    this.writeInt(obj.length, field + '[count]')\n    for (var i = 0; i < obj.length; i++) {\n      this.storeObject(obj[i], itemType, field + '[' + i + ']')\n    }\n    return true\n  }\n  else if (type.substr(0, 6).toLowerCase() == 'vector') {\n    throw new Error('Invalid vector object')\n  }\n\n  if (!angular.isObject(obj)) {\n    throw new Error('Invalid object for type ' + type)\n  }\n\n  var schema = this.mtproto ? Config.Schema.MTProto : Config.Schema.API\n  var predicate = obj['_']\n  var isBare = false\n  var constructorData = false,\n    i\n\n  if (isBare = (type.charAt(0) == '%')) {\n    type = type.substr(1)\n  }\n\n  for (i = 0; i < schema.constructors.length; i++) {\n    if (schema.constructors[i].predicate == predicate) {\n      constructorData = schema.constructors[i]\n      break\n    }\n  }\n  if (!constructorData) {\n    throw new Error('No predicate ' + predicate + ' found')\n  }\n\n  if (predicate == type) {\n    isBare = true\n  }\n\n  if (!isBare) {\n    this.writeInt(intToUint(constructorData.id), field + '[' + predicate + '][id]')\n  }\n\n  var param, type\n  var i, condType\n  var fieldBit\n  var len = constructorData.params.length\n  for (i = 0; i < len; i++) {\n    param = constructorData.params[i]\n    type = param.type\n    if (type.indexOf('?') !== -1) {\n      condType = type.split('?')\n      fieldBit = condType[0].split('.')\n      if (!(obj[fieldBit[0]] & (1 << fieldBit[1]))) {\n        continue\n      }\n      type = condType[1]\n    }\n\n    this.storeObject(obj[param.name], type, field + '[' + predicate + '][' + param.name + ']')\n  }\n\n  return constructorData.type\n}\n\nfunction TLDeserialization (buffer, options) {\n  options = options || {}\n\n  this.offset = 0 // in bytes\n  this.override = options.override || {}\n\n  this.buffer = buffer\n  this.intView = new Uint32Array(this.buffer)\n  this.byteView = new Uint8Array(this.buffer)\n\n  // this.debug = options.debug !== undefined ? options.debug : Config.Modes.debug\n  this.mtproto = options.mtproto || false\n  return this\n}\n\nTLDeserialization.prototype.readInt = function (field) {\n  if (this.offset >= this.intView.length * 4) {\n    throw new Error('Nothing to fetch: ' + field)\n  }\n\n  var i = this.intView[this.offset / 4]\n\n  this.debug && console.log('<<<', i.toString(16), i, field)\n\n  this.offset += 4\n\n  return i\n}\n\nTLDeserialization.prototype.fetchInt = function (field) {\n  return this.readInt((field || '') + ':int')\n}\n\nTLDeserialization.prototype.fetchDouble = function (field) {\n  var buffer = new ArrayBuffer(8)\n  var intView = new Int32Array(buffer)\n  var doubleView = new Float64Array(buffer)\n\n  intView[0] = this.readInt((field || '') + ':double[low]'),\n  intView[1] = this.readInt((field || '') + ':double[high]')\n\n  return doubleView[0]\n}\n\nTLDeserialization.prototype.fetchLong = function (field) {\n  var iLow = this.readInt((field || '') + ':long[low]')\n  var iHigh = this.readInt((field || '') + ':long[high]')\n\n  var longDec = bigint(iHigh).shiftLeft(32).add(bigint(iLow)).toString()\n\n  return longDec\n}\n\nTLDeserialization.prototype.fetchBool = function (field) {\n  var i = this.readInt((field || '') + ':bool')\n  if (i == 0x997275b5) {\n    return true\n  } else if (i == 0xbc799737) {\n    return false\n  }\n\n  this.offset -= 4\n  return this.fetchObject('Object', field)\n}\n\nTLDeserialization.prototype.fetchString = function (field) {\n  var len = this.byteView[this.offset++]\n\n  if (len == 254) {\n    var len = this.byteView[this.offset++] |\n      (this.byteView[this.offset++] << 8) |\n      (this.byteView[this.offset++] << 16)\n  }\n\n  var sUTF8 = ''\n  for (var i = 0; i < len; i++) {\n    sUTF8 += String.fromCharCode(this.byteView[this.offset++])\n  }\n\n  // Padding\n  while (this.offset % 4) {\n    this.offset++\n  }\n\n  try {\n    var s = decodeURIComponent(escape(sUTF8))\n  } catch (e) {\n    var s = sUTF8\n  }\n\n  this.debug && console.log('<<<', s, (field || '') + ':string')\n\n  return s\n}\n\nTLDeserialization.prototype.fetchBytes = function (field) {\n  var len = this.byteView[this.offset++]\n\n  if (len == 254) {\n    len = this.byteView[this.offset++] |\n      (this.byteView[this.offset++] << 8) |\n      (this.byteView[this.offset++] << 16)\n  }\n\n  var bytes = this.byteView.subarray(this.offset, this.offset + len)\n  this.offset += len\n\n  // Padding\n  while (this.offset % 4) {\n    this.offset++\n  }\n\n  this.debug && console.log('<<<', bytesToHex(bytes), (field || '') + ':bytes')\n\n  return bytes\n}\n\nTLDeserialization.prototype.fetchIntBytes = function (bits, typed, field) {\n  if (bits % 32) {\n    throw new Error('Invalid bits: ' + bits)\n  }\n\n  var len = bits / 8\n  if (typed) {\n    var result = this.byteView.subarray(this.offset, this.offset + len)\n    this.offset += len\n    return result\n  }\n\n  var bytes = []\n  for (var i = 0; i < len; i++) {\n    bytes.push(this.byteView[this.offset++])\n  }\n\n  this.debug && console.log('<<<', bytesToHex(bytes), (field || '') + ':int' + bits)\n\n  return bytes\n}\n\nTLDeserialization.prototype.fetchRawBytes = function (len, typed, field) {\n  if (len === false) {\n    len = this.readInt((field || '') + '_length')\n  }\n\n  if (typed) {\n    var bytes = new Uint8Array(len)\n    bytes.set(this.byteView.subarray(this.offset, this.offset + len))\n    this.offset += len\n    return bytes\n  }\n\n  var bytes = []\n  for (var i = 0; i < len; i++) {\n    bytes.push(this.byteView[this.offset++])\n  }\n\n  this.debug && console.log('<<<', bytesToHex(bytes), (field || ''))\n\n  return bytes\n}\n\nTLDeserialization.prototype.fetchObject = function (type, field) {\n  switch (type) {\n    case '#':\n    case 'int':\n      return this.fetchInt(field)\n    case 'long':\n      return this.fetchLong(field)\n    case 'int128':\n      return this.fetchIntBytes(128, false, field)\n    case 'int256':\n      return this.fetchIntBytes(256, false, field)\n    case 'int512':\n      return this.fetchIntBytes(512, false, field)\n    case 'string':\n      return this.fetchString(field)\n    case 'bytes':\n      return this.fetchBytes(field)\n    case 'double':\n      return this.fetchDouble(field)\n    case 'Bool':\n      return this.fetchBool(field)\n    case 'true':\n      return true\n  }\n\n  field = field || type || 'Object'\n\n  if (type.substr(0, 6) == 'Vector' || type.substr(0, 6) == 'vector') {\n    if (type.charAt(0) == 'V') {\n      var constructor = this.readInt(field + '[id]')\n      var constructorCmp = uintToInt(constructor)\n\n      if (constructorCmp == 0x3072cfa1) { // Gzip packed\n        var compressed = this.fetchBytes(field + '[packed_string]')\n        var uncompressed = gzipUncompress(compressed)\n        var buffer = bytesToArrayBuffer(uncompressed)\n        var newDeserializer = (new TLDeserialization(buffer))\n\n        return newDeserializer.fetchObject(type, field)\n      }\n      if (constructorCmp != 0x1cb5c415) {\n        throw new Error('Invalid vector constructor ' + constructor)\n      }\n    }\n    var len = this.readInt(field + '[count]')\n    var result = []\n    if (len > 0) {\n      var itemType = type.substr(7, type.length - 8); // for \"Vector<itemType>\"\n      for (var i = 0; i < len; i++) {\n        result.push(this.fetchObject(itemType, field + '[' + i + ']'))\n      }\n    }\n\n    return result\n  }\n\n  var schema = this.mtproto ? Config.Schema.MTProto : Config.Schema.API\n  var predicate = false\n  var constructorData = false\n\n  if (type.charAt(0) == '%') {\n    var checkType = type.substr(1)\n    for (var i = 0; i < schema.constructors.length; i++) {\n      if (schema.constructors[i].type == checkType) {\n        constructorData = schema.constructors[i]\n        break\n      }\n    }\n    if (!constructorData) {\n      throw new Error('Constructor not found for type: ' + type)\n    }\n  }\n  else if (type.charAt(0) >= 97 && type.charAt(0) <= 122) {\n    for (var i = 0; i < schema.constructors.length; i++) {\n      if (schema.constructors[i].predicate == type) {\n        constructorData = schema.constructors[i]\n        break\n      }\n    }\n    if (!constructorData) {\n      throw new Error('Constructor not found for predicate: ' + type)\n    }\n  }else {\n    var constructor = this.readInt(field + '[id]')\n    var constructorCmp = uintToInt(constructor)\n\n    if (constructorCmp == 0x3072cfa1) { // Gzip packed\n      var compressed = this.fetchBytes(field + '[packed_string]')\n      var uncompressed = gzipUncompress(compressed)\n      var buffer = bytesToArrayBuffer(uncompressed)\n      var newDeserializer = (new TLDeserialization(buffer))\n\n      return newDeserializer.fetchObject(type, field)\n    }\n\n    var index = schema.constructorsIndex\n    if (!index) {\n      schema.constructorsIndex = index = {}\n      for (var i = 0; i < schema.constructors.length; i++) {\n        index[schema.constructors[i].id] = i\n      }\n    }\n    var i = index[constructorCmp]\n    if (i) {\n      constructorData = schema.constructors[i]\n    }\n\n    var fallback = false\n    if (!constructorData && this.mtproto) {\n      var schemaFallback = Config.Schema.API\n      for (i = 0; i < schemaFallback.constructors.length; i++) {\n        if (schemaFallback.constructors[i].id == constructorCmp) {\n          constructorData = schemaFallback.constructors[i]\n\n          delete this.mtproto\n          fallback = true\n          break\n        }\n      }\n    }\n    if (!constructorData) {\n      throw new Error('Constructor not found: ' + constructor + ' ' + this.fetchInt() + ' ' + this.fetchInt())\n    }\n  }\n\n  predicate = constructorData.predicate\n\n  var result = {'_': predicate}\n  var overrideKey = (this.mtproto ? 'mt_' : '') + predicate\n  var self = this\n\n  if (this.override[overrideKey]) {\n    this.override[overrideKey].apply(this, [result, field + '[' + predicate + ']'])\n  } else {\n    var i, param\n    var type, isCond\n    var condType, fieldBit\n    var value\n    var len = constructorData.params.length\n    for (i = 0; i < len; i++) {\n      param = constructorData.params[i]\n      type = param.type\n      if (type == '#' && result.pFlags === undefined) {\n        result.pFlags = {}\n      }\n      if (isCond = (type.indexOf('?') !== -1)) {\n        condType = type.split('?')\n        fieldBit = condType[0].split('.')\n        if (!(result[fieldBit[0]] & (1 << fieldBit[1]))) {\n          continue\n        }\n        type = condType[1]\n      }\n\n      value = self.fetchObject(type, field + '[' + predicate + '][' + param.name + ']')\n\n      if (isCond && type === 'true') {\n        result.pFlags[param.name] = value\n      } else {\n        result[param.name] = value\n      }\n    }\n  }\n\n  if (fallback) {\n    this.mtproto = true\n  }\n\n  return result\n}\n\nTLDeserialization.prototype.getOffset = function () {\n  return this.offset\n}\n\nTLDeserialization.prototype.fetchEnd = function () {\n  if (this.offset != this.byteView.length) {\n    throw new Error('Fetch end with non-empty buffer')\n  }\n  return true\n}\n"]}