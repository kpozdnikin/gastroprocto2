{"version":3,"sources":["init.js"],"names":[],"mappings":"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","file":"init-compiled.js","sourcesContent":[";(function initApplication () {\n  // Prevent click-jacking\n  try {\n    if (window == window.top || window.chrome && chrome.app && chrome.app.window) {\n      document.documentElement.style.display = 'block'\n    } else {\n      top.location = self.location\n    }\n  } catch (e) {console.error('CJ protection', e) }\n\n  var classes = [\n    Config.Navigator.osX ? 'osx' : 'non_osx',\n    Config.Navigator.msie ? 'msie' : 'non_msie',\n    Config.Navigator.retina ? 'is_2x' : 'is_1x'\n  ]\n  if (Config.Modes.ios_standalone) {\n    classes.push('ios_standalone')\n  }\n  $(document.body).addClass(classes.join(' '))\n\n  ConfigStorage.get('layout_selected', 'i18n_locale', function (params) {\n    var layout = params[0]\n    var locale = params[1]\n    var defaultLocale = 'en-us'\n    var bootReady = {\n      dom: false,\n      i18n_ng: false,\n      i18n_messages: false,\n      i18n_fallback: false\n    }\n    var checkReady = function checkReady () {\n      var i\n      var ready = true\n      for (i in bootReady) {\n        if (bootReady.hasOwnProperty(i) && bootReady[i] === false) {\n          ready = false\n          break\n        }\n      }\n      if (ready) {\n        bootReady.boot = false\n        angular.bootstrap(document, ['myApp'])\n      }\n    }\n\n    if (Config.Modes.force_mobile) {\n      layout = 'mobile'\n    }\n    else if (Config.Modes.force_desktop) {\n      layout = 'desktop'\n    }\n\n    switch (layout) {\n      case 'mobile':\n        Config.Mobile = true\n        break\n      case 'desktop':\n        Config.Mobile = false\n        break\n      default:\n        var width = $(window).width()\n        Config.Mobile = Config.Navigator.mobile || width > 10 && width < 480\n        break\n    }\n    $('head').append(\n      '<link rel=\"stylesheet\" href=\"css/' + (Config.Mobile ? 'mobile.css' : 'desktop.css') + '\" />'\n    )\n\n    if (!locale) {\n      locale = (navigator.language || '').toLowerCase()\n      locale = Config.I18n.aliases[locale] || locale\n    }\n    for (var i = 0; i < Config.I18n.supported.length; i++) {\n      if (Config.I18n.supported[i] == locale) {\n        Config.I18n.locale = locale\n        break\n      }\n    }\n    bootReady.i18n_ng = Config.I18n.locale == defaultLocale // Already included\n\n    $.getJSON('js/locales/' + Config.I18n.locale + '.json').success(function (json) {\n      Config.I18n.messages = json\n      bootReady.i18n_messages = true\n      if (Config.I18n.locale == defaultLocale) { // No fallback, leave empty object\n        bootReady.i18n_fallback = true\n      }\n      checkReady()\n    })\n\n    if (Config.I18n.locale != defaultLocale) {\n      $.getJSON('js/locales/' + defaultLocale + '.json').success(function (json) {\n        Config.I18n.fallback_messages = json\n        bootReady.i18n_fallback = true\n        checkReady()\n      })\n    }\n\n    $(document).ready(function () {\n      bootReady.dom = true\n      if (!bootReady.i18n_ng) { // onDOMready because needs to be after angular\n        $('<script>').appendTo('body')\n          .on('load', function () {\n            bootReady.i18n_ng = true\n            checkReady()\n          })\n          .attr('src', 'vendor/angular/i18n/angular-locale_' + Config.I18n.locale + '.js')\n      } else {\n        checkReady()\n      }\n    })\n  })\n})()\n"]}