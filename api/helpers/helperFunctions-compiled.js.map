{"version":3,"sources":["helperFunctions.js"],"names":[],"mappings":";;AAAA,IAAI,QAAQ,QAAQ,iBAAR,CAAZ;AACA,IAAI,SAAS,QAAQ,kBAAR,CAAb;;AAEA,IAAI,UAAU,EAAd;;AAEA;AACA,QAAQ,eAAR,GAA0B,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAwB;;AAEjD,KAAG,CAAC,IAAI,KAAJ,CAAU,SAAd,EAAwB;AACvB,MAAI,MAAJ,CAAW,GAAX;AACA,MAAI,IAAJ,CAAS,EAAC,QAAO,OAAR,EAAgB,OAAM,iBAAtB,EAAT;AACA,EAHD,MAII;AACH,MAAI,OAAO,MAAM,cAAN,CAAqB,IAAI,KAAJ,CAAU,SAA/B,CAAX;AACA,OAAK,IAAL,CAAU,UAAS,MAAT,EAAgB;AACzB,OAAG,MAAH,EAAU;AACT;AACA,IAFD,MAEK;AACJ,QAAI,MAAJ,CAAW,GAAX;AACA,QAAI,IAAJ,CAAS,EAAC,QAAO,OAAR,EAAgB,OAAM,iBAAtB,EAAT;AACA;AACD,GAPD;AASA;AACD,CAlBD;;AAoBA;AACA,QAAQ,UAAR,GAAqB,YAAU;AAC9B,KAAI,UAAU,MAAM,GAAN,EAAd;AACA,SAAQ,IAAR,CAAa,UAAS,IAAT,EAAc;AAC1B,MAAG,KAAK,MAAR,EAAe;AACd,WAAQ,GAAR,CAAY,gCAAZ;AACA,GAFD,MAGI;AACH,WAAQ,GAAR,CAAY,yBAAZ;AACA,SAAM,IAAN;AACA;AACD,EARD;;AAUA,KAAI,WAAW,OAAO,GAAP,EAAf;AACA,UAAS,IAAT,CAAc,UAAS,IAAT,EAAc;;AAE3B,MAAG,KAAK,MAAR,EAAe;AACd,WAAQ,GAAR,CAAY,iCAAZ;AACA,GAFD,MAGI;AACH,WAAQ,GAAR,CAAY,0BAAZ;AACA,UAAO,IAAP;AACA;AACD,EATD;AAUA,CAvBD;;AAyBA,OAAO,OAAP,GAAiB,OAAjB","file":"helperFunctions-compiled.js","sourcesContent":["var Users = require('../models/users');\nvar Videos = require('../models/videos');\n\nvar helpers = {};\n\n//Function that checks if the request is authenticated or not.\nhelpers.isAuthenticated = function(req, res, next){\n\n\tif(!req.query.sessionId){\n\t\tres.status(401);\n\t\tres.send({status:'error',error:'Not Authorized.'});\n\t}\n\telse{\n\t\tvar user = Users.getBySessionId(req.query.sessionId);\t\n\t\tuser.then(function(dbuser){\n\t\t\tif(dbuser){\n\t\t\t\tnext();\n\t\t\t}else{\n\t\t\t\tres.status(401);\n\t\t\t\tres.send({status:'error',error:'Not Authorized.'});\t\t\n\t\t\t}\t\n\t\t});\n\t\t\n\t}\n}\n\n//Function to populate data in DB if DB is empty.\nhelpers.populateDb = function(){\n\tvar promise = Users.get();\n\tpromise.then(function(data){\n\t\tif(data.length){\n\t\t\tconsole.log('Users table already populated.');\n\t\t}\n\t\telse{\n\t\t\tconsole.log('Populating users table.');\n\t\t\tUsers.seed();\t\n\t\t}\n\t});\n\n\tvar promise2 = Videos.get();\n\tpromise2.then(function(data){\n\t\t\n\t\tif(data.length){\n\t\t\tconsole.log('videos table already populated.');\n\t\t}\n\t\telse{\n\t\t\tconsole.log('Populating videos table.');\n\t\t\tVideos.seed();\t\n\t\t}\n\t});\n}\n\nmodule.exports = helpers;\n"]}